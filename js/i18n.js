/**
 * Internationalization (i18n) Module - Complete Translation File
 */

const translations = {
  en: {
    'meta.title': 'Weidmann Reinigungen - Professional Cleaning Services',

    // Navigation
    'nav.home': 'Home',
    'nav.services': 'Services',
    'nav.about': 'About',
    'nav.contact': 'Contact',

    // Homepage Hero
    'hero.title': 'Your Trusted Swiss Cleaning Service',
    'hero.subtitle': 'Professional, reliable, and local cleaning for homes and small businesses.',
    'hero.cta': 'Book Now',

    // Footer
    'footer.rights': 'All rights reserved.',

    // Services Page
    'services.title': 'Our Services',
    'services.subtitle': 'Professional cleaning tailored to your home or business in Switzerland.',
    'services.heading': 'What We Offer',

    'services.homeCleaning.title': 'Home Cleaning',
    'services.homeCleaning.desc': 'Regular and deep cleaning for your home, keeping every room spotless.',

    'services.officeCleaning.title': 'Office Cleaning',
    'services.officeCleaning.desc': 'Professional office cleaning to maintain a productive work environment.',

    'services.endTenancy.title': 'End of Tenancy',
    'services.endTenancy.desc': 'Thorough cleaning when moving out to ensure deposit return.',

    'services.staircaseCleaning.title': 'Staircase Cleaning',
    'services.staircaseCleaning.desc': 'Regular maintenance of common areas and staircases in buildings.',

    'services.deepCleaning.title': 'Deep Cleaning',
    'services.deepCleaning.desc': 'Detailed cleaning including appliances, baseboards and hard-to-reach areas.',

    'services.postConstruction.title': 'Post-Construction Cleaning',
    'services.postConstruction.desc': 'Removal of dust, debris and residues after construction or renovation.',

    'services.windowCleaning.title': 'Window Cleaning',
    'services.windowCleaning.desc': 'Interior and exterior window cleaning including frames and sills.',

    'services.eventCleanup.title': 'Event Cleanup',
    'services.eventCleanup.desc': 'Before and after cleaning for private or corporate events.',

    // About Page
    'about.hero.title': 'About Us',
    'about.hero.subtitle': 'Reliable cleaning services you can trust.',

    'about.intro.title': 'Who We Are',
    'about.intro.text': 'Weidmann Reinigungen is a locally based cleaning company serving Zurich and surrounding areas. We provide professional cleaning services for private households and small businesses.',

    'about.experience.title': 'Experience & Trust',
    'about.experience.text': 'With over five years of professional experience, we are fully insured and registered in Switzerland. Our clients value our attention to detail, discretion, and reliability.',

    'about.work.title': 'How We Work',
    'about.work.text': 'The company is currently managed personally and operates with a high level of flexibility. As demand grows, we collaborate with trusted partners to maintain consistent quality.',

    'about.values.title': 'Our Values',
    'about.values.item1': 'Attention to detail',
    'about.values.item2': 'Flexibility and reliability',
    'about.values.item3': 'Trust and discretion',
    'about.values.item4': 'Long-term client satisfaction',

    // Contact Page
    'contact.title': 'Contact Us',
    'contact.heading': 'Get in Touch',
    'contact.subtitle': 'Request a quote or ask a question — we\'re happy to help.',

    'contact.whatsapp.title': 'WhatsApp',
    'contact.whatsapp.link': 'Chat with us',

    'contact.email.title': 'Email',
    'contact.phone.title': 'Phone',

    'contact.form.title': 'Send us a message',
    'contact.form.name': 'Name',
    'contact.form.email': 'Email',
    'contact.form.phone': 'Phone (optional)',
    'contact.form.message': 'Message',
    'contact.form.submit': 'Send Message',

    'contact.info.heading': 'Service Area',
    'contact.info.location': 'Zürich & Surroundings',
    'contact.info.availability': 'Flexible availability',

    'contact.success': 'Thank you! We will get back to you shortly.',

    // Testimonials
    'testimonials.title': 'What Our Clients Say',
    'testimonials.one.text': 'Always reliable and extremely thorough. I trust her with my home completely.',
    'testimonials.one.author': 'Christian, Zürich',
    'testimonials.two.text': 'Flexible, professional and very attentive to details. Highly recommended.',
    'testimonials.two.author': 'Patrizia, Männedorf',
    'testimonials.three.text': 'Great communication and excellent results every time.',
    'testimonials.three.author': 'Alexandra, Zollikon',
    // About Page
    'about.hero.title': 'About Us',
    'about.hero.subtitle': 'Reliable cleaning services you can trust.',
    'about.hero.cta': 'Book a Cleaning',
    
    'about.intro.title': 'Who We Are',
    'about.intro.text': 'Weidmann Reinigungen is a locally based cleaning company serving Zurich and surrounding areas. We provide professional cleaning services for private households and small businesses.',
    
    'about.experience.title': 'Experience & Trust',
    'about.experience.text': 'With over five years of professional experience, we are fully insured and registered in Switzerland. Our clients value our attention to detail, discretion, and reliability.',
    
    'about.work.title': 'How We Work',
    'about.work.text': 'The company is currently managed personally and operates with a high level of flexibility. As demand grows, we collaborate with trusted partners to maintain consistent quality.',
    
    'about.values.title': 'Our Values',
    'about.values.item1': 'Attention to detail',
    'about.values.item2': 'Flexibility and reliability',
    'about.values.item3': 'Trust and discretion',
    'about.values.item4': 'Long-term client satisfaction'
  },
  
  de: {
    'meta.title': 'Weidmann Reinigungen - Professionelle Reinigungsdienste',

    // Navigation
    'nav.home': 'Startseite',
    'nav.services': 'Leistungen',
    'nav.about': 'Über uns',
    'nav.contact': 'Kontakt',

    // Homepage Hero
    'hero.title': 'Ihr vertrauenswürdiger Schweizer Reinigungsdienst',
    'hero.subtitle': 'Professionelle, zuverlässige und lokale Reinigung für Haushalte und Unternehmen.',
    'hero.cta': 'Jetzt buchen',

    // Footer
    'footer.rights': 'Alle Rechte vorbehalten.',

    // Services Page
    'services.title': 'Unsere Dienstleistungen',
    'services.subtitle': 'Professionelle Reinigung für Ihr Zuhause oder Unternehmen in der Schweiz.',
    'services.heading': 'Was wir anbieten',

    'services.homeCleaning.title': 'Haushaltsreinigung',
    'services.homeCleaning.desc': 'Regelmäßige und gründliche Reinigung für Ihr Zuhause, damit jeder Raum makellos bleibt.',

    'services.officeCleaning.title': 'Büroreinigung',
    'services.officeCleaning.desc': 'Professionelle Büroreinigung für eine produktive Arbeitsumgebung.',

    'services.endTenancy.title': 'Endreinigung',
    'services.endTenancy.desc': 'Gründliche Reinigung beim Auszug zur Sicherung Ihrer Kaution.',

    'services.staircaseCleaning.title': 'Treppenreinigung',
    'services.staircaseCleaning.desc': 'Regelmäßige Pflege von Gemeinschaftsbereichen und Treppenhäusern.',

    'services.deepCleaning.title': 'Grundreinigung',
    'services.deepCleaning.desc': 'Intensive Reinigung inklusive Geräte, Sockelleisten und Details.',

    'services.postConstruction.title': 'Baureinigung',
    'services.postConstruction.desc': 'Entfernung von Staub, Schmutz und Baurückständen nach Bauarbeiten.',

    'services.windowCleaning.title': 'Fensterreinigung',
    'services.windowCleaning.desc': 'Innen- und Außenreinigung von Fenstern inklusive Rahmen.',

    'services.eventCleanup.title': 'Eventreinigung',
    'services.eventCleanup.desc': 'Reinigung vor und nach privaten oder geschäftlichen Veranstaltungen.',

    // About Page
    'about.hero.title': 'Über uns',
    'about.hero.subtitle': 'Zuverlässige Reinigungsdienste, denen Sie vertrauen können.',

    'about.intro.title': 'Wer wir sind',
    'about.intro.text': 'Weidmann Reinigungen ist ein lokal ansässiges Reinigungsunternehmen mit Einsatzgebiet Zürich und Umgebung. Wir bieten professionelle Reinigungsdienstleistungen für Privathaushalte und kleine Unternehmen.',

    'about.experience.title': 'Erfahrung & Vertrauen',
    'about.experience.text': 'Mit über fünf Jahren Berufserfahrung sind wir vollständig versichert und in der Schweiz registriert. Unsere Kundinnen und Kunden schätzen unsere Sorgfalt, Diskretion und Zuverlässigkeit.',

    'about.work.title': 'Unsere Arbeitsweise',
    'about.work.text': 'Der Betrieb wird derzeit persönlich geführt und arbeitet flexibel. Bei wachsender Nachfrage erfolgt die Zusammenarbeit mit ausgewählten Partnern.',

    'about.values.title': 'Unsere Werte',
    'about.values.item1': 'Sorgfalt und Liebe zum Detail',
    'about.values.item2': 'Flexibilität und Zuverlässigkeit',
    'about.values.item3': 'Vertrauen und Diskretion',
    'about.values.item4': 'Langfristige Kundenzufriedenheit',

    // Contact Page
    'contact.title': 'Kontakt',
    'contact.heading': 'Kontakt aufnehmen',
    'contact.subtitle': 'Fordern Sie ein Angebot an oder stellen Sie eine Frage — wir helfen Ihnen gerne.',

    'contact.whatsapp.title': 'WhatsApp',
    'contact.whatsapp.link': 'Chatten Sie mit uns',

    'contact.email.title': 'E-Mail',
    'contact.phone.title': 'Telefon',

    'contact.form.title': 'Senden Sie uns eine Nachricht',
    'contact.form.name': 'Name',
    'contact.form.email': 'E-Mail',
    'contact.form.phone': 'Telefon (optional)',
    'contact.form.message': 'Nachricht',
    'contact.form.submit': 'Nachricht senden',

    'contact.info.heading': 'Einsatzgebiet',
    'contact.info.location': 'Zürich & Umgebung',
    'contact.info.availability': 'Flexible Verfügbarkeit',

    'contact.success': 'Vielen Dank! Wir melden uns in Kürze bei Ihnen.',

    // Testimonials
    'testimonials.title': 'Was unsere Kunden sagen',
    'testimonials.one.text': 'Immer zuverlässig und äußerst gründlich. Ich vertraue ihr mein Zuhause vollkommen an.',
    'testimonials.one.author': 'Christian, Zürich',
    'testimonials.two.text': 'Flexibel, professionell und sehr detailorientiert. Sehr empfehlenswert.',
    'testimonials.two.author': 'Patrizia, Männedorf',
    'testimonials.three.text': 'Großartige Kommunikation und jedes Mal ausgezeichnete Ergebnisse.',
    'testimonials.three.author': 'Alexandra, Zollikon',
    // About Page
    'about.hero.title': 'Über uns',
    'about.hero.subtitle': 'Zuverlässige Reinigungsdienste, denen Sie vertrauen können.',
    'about.hero.cta': 'Reinigung buchen',
    
    'about.intro.title': 'Wer wir sind',
    'about.intro.text': 'Weidmann Reinigungen ist ein lokal ansässiges Reinigungsunternehmen mit Einsatzgebiet Zürich und Umgebung. Wir bieten professionelle Reinigungsdienstleistungen für Privathaushalte und kleine Unternehmen.',
    
    'about.experience.title': 'Erfahrung & Vertrauen',
    'about.experience.text': 'Mit über fünf Jahren Berufserfahrung sind wir vollständig versichert und in der Schweiz registriert. Unsere Kundinnen und Kunden schätzen unsere Sorgfalt, Diskretion und Zuverlässigkeit.',
    
    'about.work.title': 'Unsere Arbeitsweise',
    'about.work.text': 'Der Betrieb wird derzeit persönlich geführt und arbeitet flexibel. Bei wachsender Nachfrage erfolgt die Zusammenarbeit mit ausgewählten Partnern.',
    
    'about.values.title': 'Unsere Werte',
    'about.values.item1': 'Sorgfalt und Liebe zum Detail',
    'about.values.item2': 'Flexibilität und Zuverlässigkeit',
    'about.values.item3': 'Vertrauen und Diskretion',
    'about.values.item4': 'Langfristige Kundenzufriedenheit'
  },

  fr: {
    'meta.title': 'Weidmann Reinigungen - Services de Nettoyage Professionnels',

    // Navigation
    'nav.home': 'Accueil',
    'nav.services': 'Services',
    'nav.about': 'À propos',
    'nav.contact': 'Contact',

    // Homepage Hero
    'hero.title': 'Votre service de nettoyage suisse de confiance',
    'hero.subtitle': 'Nettoyage professionnel et fiable pour particuliers et entreprises.',
    'hero.cta': 'Réserver',

    // Footer
    'footer.rights': 'Tous droits réservés.',

    // Services Page
    'services.title': 'Nos services',
    'services.subtitle': 'Nettoyage professionnel pour votre domicile ou entreprise en Suisse.',
    'services.heading': 'Ce que nous proposons',

    'services.homeCleaning.title': 'Nettoyage de Maison',
    'services.homeCleaning.desc': 'Nettoyage régulier et en profondeur pour votre maison, gardant chaque pièce impeccable.',

    'services.officeCleaning.title': 'Nettoyage de Bureau',
    'services.officeCleaning.desc': 'Nettoyage de bureau professionnel pour maintenir un environnement de travail productif.',

    'services.endTenancy.title': 'Fin de Location',
    'services.endTenancy.desc': 'Nettoyage complet lors du déménagement pour garantir le retour de la caution.',

    'services.staircaseCleaning.title': 'Nettoyage d\'Escalier',
    'services.staircaseCleaning.desc': 'Entretien régulier des espaces communs et des escaliers dans les immeubles.',

    'services.deepCleaning.title': 'Nettoyage en Profondeur',
    'services.deepCleaning.desc': 'Nettoyage détaillé incluant les appareils, plinthes et zones difficiles d\'accès.',

    'services.postConstruction.title': 'Nettoyage Post-Construction',
    'services.postConstruction.desc': 'Élimination de la poussière, débris et résidus après construction ou rénovation.',

    'services.windowCleaning.title': 'Nettoyage de Vitres',
    'services.windowCleaning.desc': 'Nettoyage intérieur et extérieur des fenêtres, cadres et rebords inclus.',

    'services.eventCleanup.title': 'Nettoyage d\'Événement',
    'services.eventCleanup.desc': 'Nettoyage avant et après événements privés ou professionnels.',

    // About Page
    'about.hero.title': 'À propos',
    'about.hero.subtitle': 'Des services de nettoyage fiables et professionnels.',

    'about.intro.title': 'Qui sommes-nous',
    'about.intro.text': 'Weidmann Reinigungen est une entreprise de nettoyage locale active à Zurich et dans les environs, proposant des services professionnels pour particuliers et petites entreprises.',

    'about.experience.title': 'Expérience et confiance',
    'about.experience.text': 'Avec plus de cinq ans d\'expérience, nous sommes assurés et enregistrés en Suisse. Nos clients apprécient notre sérieux et notre discrétion.',

    'about.work.title': 'Notre façon de travailler',
    'about.work.text': 'L\'entreprise est actuellement gérée de manière personnelle et flexible. En cas de croissance, nous collaborons avec des partenaires de confiance.',

    'about.values.title': 'Nos valeurs',
    'about.values.item1': 'Attention aux détails',
    'about.values.item2': 'Flexibilité et fiabilité',
    'about.values.item3': 'Confiance et discrétion',
    'about.values.item4': 'Satisfaction client durable',

    // Contact Page
    'contact.title': 'Contact',
    'contact.heading': 'Contactez-nous',
    'contact.subtitle': 'Demandez un devis ou posez une question — nous sommes là pour vous aider.',

    'contact.whatsapp.title': 'WhatsApp',
    'contact.whatsapp.link': 'Discutez avec nous',

    'contact.email.title': 'Email',
    'contact.phone.title': 'Téléphone',

    'contact.form.title': 'Envoyez-nous un message',
    'contact.form.name': 'Nom',
    'contact.form.email': 'Email',
    'contact.form.phone': 'Téléphone (optionnel)',
    'contact.form.message': 'Message',
    'contact.form.submit': 'Envoyer le message',

    
    'contact.info.heading': 'Zone de service',
    'contact.info.location': 'Zurich et environs',
    'contact.info.availability': 'Disponibilité flexible',

    'contact.success': 'Merci ! Nous vous contacterons rapidement.',

    // Testimonials
    'testimonials.title': 'Ce que disent nos clients',
    'testimonials.one.text': 'Toujours fiable et extrêmement minutieuse. Je lui fais entièrement confiance pour ma maison.',
    'testimonials.one.author': 'Christian, Zurich',
    'testimonials.two.text': 'Flexible, professionnelle et très attentive aux détails. Hautement recommandée.',
    'testimonials.two.author': 'Patrizia, Männedorf',
    'testimonials.three.text': 'Excellente communication et résultats parfaits à chaque fois.',
    'testimonials.three.author': 'Alexandra, Zollikon',
    // About Page
    'about.hero.title': 'À propos',
    'about.hero.subtitle': 'Des services de nettoyage fiables et professionnels.',
    'about.hero.cta': 'Réserver un nettoyage',
    
    'about.intro.title': 'Qui sommes-nous',
    'about.intro.text': 'Weidmann Reinigungen est une entreprise de nettoyage locale active à Zurich et dans les environs, proposant des services professionnels pour particuliers et petites entreprises.',
    
    'about.experience.title': 'Expérience et confiance',
    'about.experience.text': 'Avec plus de cinq ans d\'expérience, nous sommes assurés et enregistrés en Suisse. Nos clients apprécient notre sérieux et notre discrétion.',
    
    'about.work.title': 'Notre façon de travailler',
    'about.work.text': 'L\'entreprise est actuellement gérée de manière personnelle et flexible. En cas de croissance, nous collaborons avec des partenaires de confiance.',
    
    'about.values.title': 'Nos valeurs',
    'about.values.item1': 'Attention aux détails',
    'about.values.item2': 'Flexibilité et fiabilité',
    'about.values.item3': 'Confiance et discrétion',
    'about.values.item4': 'Satisfaction client durable'
  },

  it: {
    'meta.title': 'Weidmann Reinigungen - Servizi di Pulizia Professionali',

    // Navigation
    'nav.home': 'Home',
    'nav.services': 'Servizi',
    'nav.about': 'Chi siamo',
    'nav.contact': 'Contatto',

    // Homepage Hero
    'hero.title': 'Il tuo servizio di pulizia svizzero di fiducia',
    'hero.subtitle': 'Pulizia professionale per case e aziende.',
    'hero.cta': 'Prenota ora',

    // Footer
    'footer.rights': 'Tutti i diritti riservati.',

    // Services Page
    'services.title': 'I Nostri Servizi',
    'services.subtitle': 'Pulizia professionale su misura per la tua casa o azienda in Svizzera.',
    'services.heading': 'Cosa offriamo',

    'services.homeCleaning.title': 'Pulizia Domestica',
    'services.homeCleaning.desc': 'Pulizia regolare e profonda per la tua casa, mantenendo ogni stanza impeccabile.',

    'services.officeCleaning.title': 'Pulizia Uffici',
    'services.officeCleaning.desc': 'Pulizia ufficio professionale per mantenere un ambiente di lavoro produttivo.',

    'services.endTenancy.title': 'Fine Locazione',
    'services.endTenancy.desc': 'Pulizia accurata al momento del trasloco per garantire il ritorno del deposito.',

    'services.staircaseCleaning.title': 'Pulizia Scale',
    'services.staircaseCleaning.desc': 'Manutenzione regolare delle aree comuni e delle scale negli edifici.',

    'services.deepCleaning.title': 'Pulizia Profonda',
    'services.deepCleaning.desc': 'Pulizia dettagliata inclusi elettrodomestici, battiscopa e aree difficili da raggiungere.',

    'services.postConstruction.title': 'Pulizia Post-Costruzione',
    'services.postConstruction.desc': 'Rimozione di polvere, detriti e residui dopo costruzione o ristrutturazione.',

    'services.windowCleaning.title': 'Pulizia Finestre',
    'services.windowCleaning.desc': 'Pulizia interna ed esterna di finestre inclusi telai e davanzali.',

    'services.eventCleanup.title': 'Pulizia Eventi',
    'services.eventCleanup.desc': 'Pulizia prima e dopo eventi privati o aziendali.',

    // About Page
    'about.hero.title': 'Chi siamo',
    'about.hero.subtitle': 'Servizi di pulizia affidabili e professionali.',

    'about.intro.title': 'Chi siamo',
    'about.intro.text': 'Weidmann Reinigungen è un\'impresa di pulizie locale attiva a Zurigo e dintorni, specializzata in servizi per abitazioni private e piccole aziende.',

    'about.experience.title': 'Esperienza e affidabilità',
    'about.experience.text': 'Con oltre cinque anni di esperienza professionale, siamo assicurati e registrati in Svizzera. I clienti apprezzano la nostra precisione e discrezione.',

    'about.work.title': 'Il nostro metodo di lavoro',
    'about.work.text': 'L\'attività è attualmente gestita personalmente e opera in modo flessibile. In caso di crescita, collaboriamo con partner affidabili.',

    'about.values.title': 'I nostri valori',
    'about.values.item1': 'Attenzione ai dettagli',
    'about.values.item2': 'Flessibilità e affidabilità',
    'about.values.item3': 'Fiducia e discrezione',
    'about.values.item4': 'Soddisfazione del cliente nel tempo',

    // Contact Page
    'contact.title': 'Contatto',
    'contact.heading': 'Mettiti in contatto',
    'contact.subtitle': 'Richiedi un preventivo o fai una domanda — siamo felici di aiutarti.',

    'contact.whatsapp.title': 'WhatsApp',
    'contact.whatsapp.link': 'Chatta con noi',

    'contact.email.title': 'Email',
    'contact.phone.title': 'Telefono',

    'contact.form.title': 'Inviaci un messaggio',
    'contact.form.name': 'Nome',
    'contact.form.email': 'Email',
    'contact.form.phone': 'Telefono (opzionale)',
    'contact.form.message': 'Messaggio',
    'contact.form.submit': 'Invia messaggio',

    'contact.info.heading': 'Area di servizio',
    'contact.info.location': 'Zurigo e dintorni',
    'contact.info.availability': 'Disponibilità flessibile',

    'contact.success': 'Grazie! Ti risponderemo al più presto.',

    // Testimonials
    'testimonials.title': 'Cosa dicono i nostri clienti',
    'testimonials.one.text': 'Sempre affidabile ed estremamente accurata. Mi fido completamente di lei per la mia casa.',
    'testimonials.one.author': 'Christian, Zurigo',
    'testimonials.two.text': 'Flessibile, professionale e molto attenta ai dettagli. Altamente raccomandata.',
    'testimonials.two.author': 'Patrizia, Männedorf',
    'testimonials.three.text': 'Ottima comunicazione e risultati eccellenti ogni volta.',
    'testimonials.three.author': 'Alexandra, Zollikon',
     // About Page
    'about.hero.title': 'Chi siamo',
    'about.hero.subtitle': 'Servizi di pulizia affidabili e professionali.',
    'about.hero.cta': 'Prenota una pulizia',
    
    'about.intro.title': 'Chi siamo',
    'about.intro.text': 'Weidmann Reinigungen è un\'impresa di pulizie locale attiva a Zurigo e dintorni, specializzata in servizi per abitazioni private e piccole aziende.',
    
    'about.experience.title': 'Esperienza e affidabilità',
    'about.experience.text': 'Con oltre cinque anni di esperienza professionale, siamo assicurati e registrati in Svizzera. I clienti apprezzano la nostra precisione e discrezione.',
    
    'about.work.title': 'Il nostro metodo di lavoro',
    'about.work.text': 'L\'attività è attualmente gestita personalmente e opera in modo flessibile. In caso di crescita, collaboriamo con partner affidabili.',
    
    'about.values.title': 'I nostri valori',
    'about.values.item1': 'Attenzione ai dettagli',
    'about.values.item2': 'Flessibilità e affidabilità',
    'about.values.item3': 'Fiducia e discrezione',
    'about.values.item4': 'Soddisfazione del cliente nel tempo'
  }
};

// Supported languages
const SUPPORTED_LANGUAGES = ['en', 'de', 'fr', 'it'];
const DEFAULT_LANGUAGE = 'de';

/**
 * Detect browser language preference
 * @returns {string} Language code (en, de, fr, it)
 */
function detectBrowserLanguage() {
  const lang = navigator.language.slice(0, 2).toLowerCase();
  return SUPPORTED_LANGUAGES.includes(lang) ? lang : DEFAULT_LANGUAGE;
}

/**
 * Set language and update all text elements
 * @param {string} lang - Language code
 */
function setLanguage(lang) {
  // Validate language
  if (!SUPPORTED_LANGUAGES.includes(lang)) {
    console.warn(`Language '${lang}' not supported. Falling back to '${DEFAULT_LANGUAGE}'.`);
    lang = DEFAULT_LANGUAGE;
  }

  // Save preference
  localStorage.setItem('preferredLang', lang);

  // Update HTML lang attribute
  document.documentElement.lang = lang;

  // Update all elements with data-i18n attribute
  document.querySelectorAll('[data-i18n]').forEach(el => {
    const key = el.dataset.i18n;
    const translation = translations[lang][key];

    if (translation) {
      // Update text content
      if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') {
        el.placeholder = translation;
      } else if (el.tagName === 'TITLE') {
        el.textContent = translation;
      } else {
        el.textContent = translation;
      }
    } else {
      console.warn(`Translation missing for key '${key}' in language '${lang}'`);
    }
  });

  // Update page title if meta.title exists
  const titleKey = 'meta.title';
  if (translations[lang][titleKey]) {
    document.title = translations[lang][titleKey];
  }

  // Dispatch custom event
  document.dispatchEvent(new CustomEvent('languageChanged', { detail: { lang } }));
}

/**
 * Initialize language on page load
 */
function initLanguage() {
  const savedLang = localStorage.getItem('preferredLang');
  const lang = savedLang || detectBrowserLanguage();

  setLanguage(lang);

  // Update navbar dropdown display
  const currentLang = document.getElementById('currentLang');
  if (currentLang) {
    currentLang.textContent = lang.toUpperCase();
  }
}

// Initialize when DOM is ready
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', initLanguage);
} else {
  initLanguage();
}